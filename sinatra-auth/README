Youtube Code-Along: https://www.youtube.com/watch?v=_S1s6R-_wYc

Documentation https://api.rubyonrails.org/classes/ActiveModel/SecurePassword/ClassMethods.html


get '/' do
  session[:greeting] = "Hello WOrls"
  "Hello work"
end

get '/remember' do
  session[:greeting]
end

This should be impossible -- It will keep the above -- maintain the state -- set some state on request num 1 --

but when you went to request two every web request happens independently

requst 1
request 1 the state that was set on the previous request was maintained -- becuase of the cookie.

If you udate the cookie -- you wont see the hello world -- anything thats on a cookie, a user can edit (never put private info)


get '/' do
  session[:greeting] = "Hello WOrls"
  response.set_cookie 'credit_amount', '100'
  "Hello work"
end

get '/remember' do
  "you hvave #{request.cookies['foo']}"
  session[:greeting]
end

use Rack::MethodOverride
use Rack::Session::Cookie
run ApplicationController

always put data in a session -- dont put data in a cookies


STEPS YOU TOOK

 Created new controller

 'touch app/controllers/sessions_controller.rb'

 Mount controller in config.ru





Authentication

Remember who the user is

create form in login



Question that authenication is asking our application is -- is the user who they claim to be?



First I need users
  URLS
    get request ro sign up and see a --> see a information
  Database

Then I need to get user password_security \
then make sure that i can find a user with their actual password_security
then change log in system to use their email and password to authenticate them

How do we get users?






// ♥ > u = User.new
// ♥ > u.password = "hello"
 ♥ > rake console
[1] pry(main)> u = User.new
=> #<User:0x00007fe38617ea00 id: nil, email: nil, password_digest: nil>
[2] pry(main)> u.password = "hello"
=> "hello"
[3] pry(main)> u.email = "hello@example.com"
=> "hello@example.com"
[4] pry(main)> u.save
=> true
[5] pry(main)> u
=> #<User:0x00007fe38617ea00 id: 2, email: "hello@example.com", password_digest: "$2a$12$Zq0gZobQ1/IsaRwGFrjZC.93PVk8smfZOKLFbX3nqrHUiscLTfGt.">
[6] pry(main)> exit

// ♥ > rake console
[1] pry(main)> u = User.find_by(:email => "hello@example.com")
=> #<User:0x00007f85f6c496a8 id: 2, email: "hello@example.com", password_digest: "$2a$12$Zq0gZobQ1/IsaRwGFrjZC.93PVk8smfZOKLFbX3nqrHUiscLTfGt.">
[2] pry(main)> u.password
=> nil
[3] pry(main)> u.authenticate("hello")
=> #<User:0x00007f85f6c496a8 id: 2, email: "hello@example.com", password_digest: "$2a$12$Zq0gZobQ1/IsaRwGFrjZC.93PVk8smfZOKLFbX3nqrHUiscLTfGt.">
[4] pry(main)> u.authenticate("notthepassword")
=> false
[5] pry(main)>



1. Build my user registration process (signup form and signup creation)
2. give posts to users
3. only let users edit posts that they made/make



~/.../code-alongs/sinatra-auth // ♥ > rake console
[1] pry(main)> User.all
=> [#<User:0x00007fe06e66ddb0 id: 1, email: "flatiron@gmail.com", password_digest: nil>,
 #<User:0x00007fe06e6774c8 id: 2, email: "hello@example.com", password_digest: "$2a$12$Zq0gZobQ1/IsaRwGFrjZC.93PVk8smfZOKLFbX3nqrHUiscLTfGt.">,
 #<User:0x00007fe06e677388 id: 3, email: "apple@apple.com", password_digest: "$2a$12$mc8P6bB8hu5xIUbHFSmRbe6wyrNCQV0H2jd7oNaK4J/Er2IGov2Cm">]
[2] pry(main)> exit!
~/.../code-alongs/sinatra-auth // ♥ > rake db:create_migration NAME=create_posts
db/migrate/20200601010526_create_posts.rb
~/.../code-alongs/sinatra-auth // ♥ >
